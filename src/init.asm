init:
	; SN76489ANをミュート
	ld	a, #0x9f
	out	(0x7f), a
	ld	a, #0xbf
	out	(0x7f), a
	ld	a, #0xdf
	out	(0x7f), a
	ld	a, #0xff
	out	(0x7f), a

	; 画面設定
	ld	a, #0x00
	ld	(0xf3ea), a
	ld	(0xf3eb), a
	ld	a, #0x01
	call	0x005f

	; MSX2以降ならパレット設定
	ld	a, (0x002d)
	or	a
	jr	z, init_end	; MSXならスキップ
	di
	ld	a, (0x0007)	; 0x98(0x88)
	ld	c, a
	inc	c		; 0x99(0x89)
	ld	a, #0x00
	out	(c), a
	ld	a, #0x80+16	; レジスタ16
	out	(c), a
	ei
	inc	c		; 0x9a(0x8a)
	ld	b, #32
	ld	hl, #palette
	otir
	jr	init_end
palette:			; ここから拝借 https://note.com/msx_z80_program/n/na55fd77407f0
	db	#0x00, #0x00	; Color 0
	db	#0x00, #0x00	; Color 1
	db	#0x11, #0x05	; Color 2
	db	#0x33, #0x06	; Color 3
	db	#0x26, #0x02	; Color 4
	db	#0x37, #0x03	; Color 5
	db	#0x52, #0x02	; Color 6
	db	#0x27, #0x06	; Color 7
	db	#0x62, #0x02	; Color 8
	db	#0x63, #0x03	; Color 9
	db	#0x52, #0x05	; Color A
	db	#0x63, #0x06	; Color B
	db	#0x11, #0x04	; Color C
	db	#0x55, #0x02	; Color D
	db	#0x55, #0x05	; Color E
	db	#0x77, #0x07	; Color F
init_end:
